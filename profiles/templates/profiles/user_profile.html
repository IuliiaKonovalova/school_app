{% extends "base.html" %}
{% load static %}

{% block content %}
<div>
  {% if user_profile == request.user %}
  <h2 class="profile__title">Your Profile</h2>
  <div class="profile__title--user">{{ user_profile.first_name }} {{ user_profile.last_name }}</div>


  <a href="{% url 'user_profile_change_password' username=request.user %}">Change Password</a>
  <br>
  <a href="{% url 'user_profile_edit' username=request.user %}">Edit profile</a>
  {% else %}
  <h2 class="profile__title">User Profile</h2>
  <div class="profile__title--user">{{ user_profile.first_name }} {{ user_profile.last_name }}</div>
  {% endif %}
  <div>{{ user_profile.phone }}</div>
  <div>{{ user_profile.email }}</div>

  {% if user_profile.role == 4 %}
  <h2>Parent</h2>
  <h3>Children:</h3>
  <div>
    {% for child in children %}

    <a href="{% url 'student_detail' pk=child.pk%}">{{ child.first_name }}{{ child.last_name }}</a>
    {% endfor %}
  </div>
  {% endif %}


  {% if user_profile.role == 2 or user_profile.role == 0 %}
  <h3>Sales Manager</h3>
  <div>
    <h4>Kids assigned:</h4>
    {% for child in children %}
    <li>
      <a href="{% url 'student_detail' pk=child.pk%}">{{ child.first_name }}{{ child.last_name }}</a>
    </li>
    {% endfor %}



  </div>

  <div>
    <h4>Sales made:</h4>
    {% for sale in sales %}
    <li>
      Sold {{ sale.amount }} classes
      to:<a href="{% url 'user_profile' username=sale.sold_to.user.username %}">{{ sale.sold_to }}</a>
      on {{ sale.date }}
    </li>
    {% endfor %}
  </div>
  {% endif %}
</div>
{% endblock %}