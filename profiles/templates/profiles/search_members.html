{% extends "base.html" %}
{% load static %}

{% block content %}

<h2>All members</h2>

{% if not user.is_authenticated or request.user.role == 4 or request.user.role == 5 %}
<div class="access">
  <div class="access__error">

    <div class="access__error--image">
      <img src="{% static 'images/foxy_emoji.svg' %}" alt="Access error">
    </div>
    <p class="access__error--text">You are not authorized to view this page!</p>
    <div class="links">
      <a href="{% url 'user_profile' username=request.user %}" class="links__btn links__btn--name links__btn--content">
        <div class="profile__btn--text">
          Back to your profile
        </div>
        <i class="fas fa-external-link-alt profile__btn--icon"></i>
      </a>
    </div>
  </div>
</div>
{% else %}

<form method="POST">
  {% csrf_token %}

  <div>
    <input type="radio" class="" name="role" value="all" id="all">
    <label class="btn" for="all">all members</label>

    <input type="radio" class="" name="role" value="4" id="parents">
    <label class="btn" for="parents">Parents</label>

    <input type="radio" class="" name="role" value="1" id="teachers">
    <label class="btn" for="teachers">Teachers</label>

    <input type="radio" class="" name="role" value="2" id="sales">
    <label class="btn" for="sales">Sales</label>

    <input type="radio" class="" name="role" value="3" id="receptionists">
    <label class="btn" for="receptionists">Receptionists</label>

    <input type="submit" value="Search">
  </div>

  <input type="text" id="members-search-here" class="from-control" placeholder="type sth">
  <div id="box">
    {% for member in members %}
    <div class="member">
      <div>{{ member.first_name }}</div>
      <div>{{ member.last_name }}</div>

      <div class="member__phone">{{member.phone}}</div>
      {% if member.role == 0 %}
      <div>Boss</div>
      {% elif member.role == 1 %}
      <div>Teacher</div>

      {% elif member.role == 2 %}
      <div>Sales</div>

      {% elif member.role == 3 %}
      <div>Receptionist</div>

      {% elif member.role == 4 %}
      <div>Parent</div>

      {% elif member.role == 5 %}
      <div>Potential Client</div>

      {% endif %}
      <a href="{% url 'user_profile' username=member.username %}">Visit profile</a>
      <br>
    </div>
    {% endfor %}
  </div>
</form>
{% endif %}





{% endblock %}