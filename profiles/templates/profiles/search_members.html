{% extends "base.html" %}
{% load static %}

{% block content %}

<h2>All members</h2>

{% if not user.is_authenticated or request.user.role == 4 or request.user.role == 5 %}
<div class="access">
  <div class="access__error">

    <div class="access__error--image">
      <img src="{% static 'images/foxy_emoji.svg' %}" alt="Access error">
    </div>
    <p class="access__error--text">You are not authorized to view this page!</p>
    <div class="links">
      <a href="{% url 'user_profile' username=request.user %}" class="links__btn links__btn--name links__btn--content">
        <div class="profile__btn--text">
          Back to your profile
        </div>
        <i class="fas fa-external-link-alt profile__btn--icon"></i>
      </a>
    </div>
  </div>
</div>
{% else %}
<div class="members">
  <form method="POST" class="members__form">
    {% csrf_token %}

    <div>
      <input type="radio" class="" name="role" value="all" id="all">
      <label class="btn" for="all">all members</label>

      <input type="radio" class="" name="role" value="4" id="parents">
      <label class="btn" for="parents">Parents</label>

      <input type="radio" class="" name="role" value="1" id="teachers">
      <label class="btn" for="teachers">Teachers</label>

      <input type="radio" class="" name="role" value="2" id="sales">
      <label class="btn" for="sales">Sales</label>

      <input type="radio" class="" name="role" value="3" id="receptionists">
      <label class="btn" for="receptionists">Receptionists</label>

      <input type="submit" value="Search">
    </div>
    <div class="members__summary">
      {{ members|length }} members found
    </div>
    <div class="members__search">
      <input type="text" id="members-search-here" class="from-control" placeholder="Type a name">
      <div value="search" class="search__btn members__undo--btn" id="members-search-undo">
        <i class="fas fa-undo-alt  profile__btn--icon"></i>
      </div>
    </div>
    <div class="members__search--instructions">
      <strong>* </strong>Remember: search is case-insensitive.
    </div>

    <div id="box" class="members__results">
      {% for member in members %}
      <!-- <div class="member members__results--item"> -->

      <a href="{% url 'user_profile' username=member.username %}"
        class="links__btn links__btn--name members__results--item">

        <div class="profile__btn--text">
          <div class="">
            {{ member.first_name }} {{ member.last_name }}
          </div>
          <div class="member__role">
            {% if member.role == 0 %}
            Boss
            {% elif member.role == 1 %}
            Teacher
            {% elif member.role == 2 %}
            Sales
            {% elif member.role == 3 %}
            Receptionist
            {% elif member.role == 4 %}
            Parent
            {% elif member.role == 5 %}
            Potential Client
            {% endif %}
          </div>
          <div>{{ member.phone }}</div>

        </div>
        <i class="fas fa-external-link-alt profile__btn--icon"></i>
      </a>

      <!-- </div> -->
      {% endfor %}
    </div>
  </form>
</div>
{% endif %}





{% endblock %}